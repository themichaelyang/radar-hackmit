'use strict';

function main() {
  var r = Radar();
  var z = -1;
  var x = void 0;
  var y = void 0;

  r.start();

  window.setTimeout(function () {
    r.startLoop(function () {
      if (!Number.isNaN(r.getCoords().y)) {
        z = 1 - r.getCoords().y;
      }
    });
  }, 500); // absolute trash, please use promises next time
  var peer = new Peer('caller', { secure: true, host: 'localhost', port: 9000, path: '/' });
  // let peer = new Peer('caller', {secure: true, key: 'yxgyl5evdndn29'}); // their server doesn't support ssl
  var connection = peer.connect('callee');
  connection.on('open', function () {
    //  connection.send('dogs man');
  });
  connection.on('data', function (data) {

    x = data.x;
    y = data.y;
    console.log(window.getXYZ());
  });

  window.getXYZ = function () {
    return { x: x, y: y, z: z };
  };
}

window.onload = main;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2t0b3AuanMiXSwibmFtZXMiOlsibWFpbiIsInIiLCJSYWRhciIsInoiLCJ4IiwieSIsInN0YXJ0Iiwid2luZG93Iiwic2V0VGltZW91dCIsInN0YXJ0TG9vcCIsIk51bWJlciIsImlzTmFOIiwiZ2V0Q29vcmRzIiwicGVlciIsIlBlZXIiLCJzZWN1cmUiLCJob3N0IiwicG9ydCIsInBhdGgiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsIm9uIiwiZGF0YSIsImNvbnNvbGUiLCJsb2ciLCJnZXRYWVoiLCJvbmxvYWQiXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBU0EsSUFBVCxHQUFnQjtBQUNkLE1BQUlDLElBQUlDLE9BQVI7QUFDQSxNQUFJQyxJQUFJLENBQUMsQ0FBVDtBQUNBLE1BQUlDLFVBQUo7QUFDQSxNQUFJQyxVQUFKOztBQUVBSixJQUFFSyxLQUFGOztBQUVBQyxTQUFPQyxVQUFQLENBQWtCLFlBQU07QUFBQ1AsTUFBRVEsU0FBRixDQUFZLFlBQU07QUFDekMsVUFBSSxDQUFDQyxPQUFPQyxLQUFQLENBQWFWLEVBQUVXLFNBQUYsR0FBY1AsQ0FBM0IsQ0FBTCxFQUFvQztBQUNsQ0YsWUFBSSxJQUFJRixFQUFFVyxTQUFGLEdBQWNQLENBQXRCO0FBQ0Q7QUFDRixLQUp3QjtBQUl0QixHQUpILEVBSUssR0FKTCxFQVJjLENBWUg7QUFDWCxNQUFJUSxPQUFPLElBQUlDLElBQUosQ0FBUyxRQUFULEVBQW1CLEVBQUNDLFFBQVEsSUFBVCxFQUFlQyxNQUFNLFdBQXJCLEVBQWtDQyxNQUFNLElBQXhDLEVBQThDQyxNQUFNLEdBQXBELEVBQW5CLENBQVg7QUFDQTtBQUNBLE1BQUlDLGFBQWFOLEtBQUtPLE9BQUwsQ0FBYSxRQUFiLENBQWpCO0FBQ0FELGFBQVdFLEVBQVgsQ0FBYyxNQUFkLEVBQXNCLFlBQU07QUFDMUI7QUFDRCxHQUZEO0FBR0FGLGFBQVdFLEVBQVgsQ0FBYyxNQUFkLEVBQXNCLFVBQUNDLElBQUQsRUFBVTs7QUFFOUJsQixRQUFJa0IsS0FBS2xCLENBQVQ7QUFDQUMsUUFBSWlCLEtBQUtqQixDQUFUO0FBQ0FrQixZQUFRQyxHQUFSLENBQVlqQixPQUFPa0IsTUFBUCxFQUFaO0FBQ0QsR0FMRDs7QUFPQWxCLFNBQU9rQixNQUFQLEdBQWdCLFlBQVc7QUFDekIsV0FBTyxFQUFDckIsR0FBR0EsQ0FBSixFQUFPQyxHQUFHQSxDQUFWLEVBQWFGLEdBQUdBLENBQWhCLEVBQVA7QUFDRCxHQUZEO0FBR0Q7O0FBSURJLE9BQU9tQixNQUFQLEdBQWdCMUIsSUFBaEIiLCJmaWxlIjoiZGVza3RvcC5qcyIsInNvdXJjZXNDb250ZW50IjpbImZ1bmN0aW9uIG1haW4oKSB7XG4gIGxldCByID0gUmFkYXIoKTtcbiAgbGV0IHogPSAtMTtcbiAgbGV0IHg7XG4gIGxldCB5O1xuXG4gIHIuc3RhcnQoKTtcblxuICB3aW5kb3cuc2V0VGltZW91dCgoKSA9PiB7ci5zdGFydExvb3AoKCkgPT4ge1xuICAgIGlmICghTnVtYmVyLmlzTmFOKHIuZ2V0Q29vcmRzKCkueSkpIHtcbiAgICAgIHogPSAxIC0gci5nZXRDb29yZHMoKS55O1xuICAgIH1cbiAgfSl9LCA1MDApOyAvLyBhYnNvbHV0ZSB0cmFzaCwgcGxlYXNlIHVzZSBwcm9taXNlcyBuZXh0IHRpbWVcbiAgbGV0IHBlZXIgPSBuZXcgUGVlcignY2FsbGVyJywge3NlY3VyZTogdHJ1ZSwgaG9zdDogJ2xvY2FsaG9zdCcsIHBvcnQ6IDkwMDAsIHBhdGg6ICcvJ30pO1xuICAvLyBsZXQgcGVlciA9IG5ldyBQZWVyKCdjYWxsZXInLCB7c2VjdXJlOiB0cnVlLCBrZXk6ICd5eGd5bDVldmRuZG4yOSd9KTsgLy8gdGhlaXIgc2VydmVyIGRvZXNuJ3Qgc3VwcG9ydCBzc2xcbiAgbGV0IGNvbm5lY3Rpb24gPSBwZWVyLmNvbm5lY3QoJ2NhbGxlZScpO1xuICBjb25uZWN0aW9uLm9uKCdvcGVuJywgKCkgPT4ge1xuICAgIC8vICBjb25uZWN0aW9uLnNlbmQoJ2RvZ3MgbWFuJyk7XG4gIH0pO1xuICBjb25uZWN0aW9uLm9uKCdkYXRhJywgKGRhdGEpID0+IHtcblxuICAgIHggPSBkYXRhLng7XG4gICAgeSA9IGRhdGEueTtcbiAgICBjb25zb2xlLmxvZyh3aW5kb3cuZ2V0WFlaKCkpO1xuICB9KTtcblxuICB3aW5kb3cuZ2V0WFlaID0gZnVuY3Rpb24oKSB7XG4gICAgcmV0dXJuIHt4OiB4LCB5OiB5LCB6OiB6fTtcbiAgfVxufVxuXG5cblxud2luZG93Lm9ubG9hZCA9IG1haW47XG4iXSwic291cmNlUm9vdCI6Ii9zb3VyY2UvIn0=
