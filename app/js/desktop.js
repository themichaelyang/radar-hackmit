'use strict';

function main() {
  var r = Radar();
  var z = -1;
  var x = void 0;
  var y = void 0;

  r.start();

  window.setTimeout(function () {
    r.startLoop(function () {
      if (!Number.isNaN(r.getCoords().y)) {
        z = 1 - r.getCoords().y;
      }
    });
  }, 500); // absolute trash, please use promises next time
  var peer = new Peer('caller', { secure: true, host: 'localhost', port: 9000, path: '/' });
  // let peer = new Peer('caller', {secure: true, key: 'yxgyl5evdndn29'}); // their server doesn't support ssl
  var connection = peer.connect('callee');
  connection.on('open', function () {
    //  connection.send('dogs man');
  });
  connection.on('data', function (data) {

    x = data.x;
    y = data.y;
    htmlCoords(window.getXYZ());
    // console.log(JSON.stringify(window.getXYZ()));
  });

  window.getXYZ = function () {
    return { x: x, y: y, z: z };
  };
}

function htmlCoords(coords) {
  // document.getElementById('x').innerHTML = coords.x;
  // document.getElementById('y').innerHTML = coords.y;
  // document.getElementById('z').innerHTML = coords.z;
}

window.onload = main;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImRlc2t0b3AuanMiXSwibmFtZXMiOlsibWFpbiIsInIiLCJSYWRhciIsInoiLCJ4IiwieSIsInN0YXJ0Iiwid2luZG93Iiwic2V0VGltZW91dCIsInN0YXJ0TG9vcCIsIk51bWJlciIsImlzTmFOIiwiZ2V0Q29vcmRzIiwicGVlciIsIlBlZXIiLCJzZWN1cmUiLCJob3N0IiwicG9ydCIsInBhdGgiLCJjb25uZWN0aW9uIiwiY29ubmVjdCIsIm9uIiwiZGF0YSIsImh0bWxDb29yZHMiLCJnZXRYWVoiLCJjb29yZHMiLCJvbmxvYWQiXSwibWFwcGluZ3MiOiI7O0FBQUEsU0FBU0EsSUFBVCxHQUFnQjtBQUNkLE1BQUlDLElBQUlDLE9BQVI7QUFDQSxNQUFJQyxJQUFJLENBQUMsQ0FBVDtBQUNBLE1BQUlDLFVBQUo7QUFDQSxNQUFJQyxVQUFKOztBQUVBSixJQUFFSyxLQUFGOztBQUVBQyxTQUFPQyxVQUFQLENBQWtCLFlBQU07QUFBQ1AsTUFBRVEsU0FBRixDQUFZLFlBQU07QUFDekMsVUFBSSxDQUFDQyxPQUFPQyxLQUFQLENBQWFWLEVBQUVXLFNBQUYsR0FBY1AsQ0FBM0IsQ0FBTCxFQUFvQztBQUNsQ0YsWUFBSSxJQUFJRixFQUFFVyxTQUFGLEdBQWNQLENBQXRCO0FBQ0Q7QUFDRixLQUp3QjtBQUl0QixHQUpILEVBSUssR0FKTCxFQVJjLENBWUg7QUFDWCxNQUFJUSxPQUFPLElBQUlDLElBQUosQ0FBUyxRQUFULEVBQW1CLEVBQUNDLFFBQVEsSUFBVCxFQUFlQyxNQUFNLFdBQXJCLEVBQWtDQyxNQUFNLElBQXhDLEVBQThDQyxNQUFNLEdBQXBELEVBQW5CLENBQVg7QUFDQTtBQUNBLE1BQUlDLGFBQWFOLEtBQUtPLE9BQUwsQ0FBYSxRQUFiLENBQWpCO0FBQ0FELGFBQVdFLEVBQVgsQ0FBYyxNQUFkLEVBQXNCLFlBQU07QUFDMUI7QUFDRCxHQUZEO0FBR0FGLGFBQVdFLEVBQVgsQ0FBYyxNQUFkLEVBQXNCLFVBQUNDLElBQUQsRUFBVTs7QUFFOUJsQixRQUFJa0IsS0FBS2xCLENBQVQ7QUFDQUMsUUFBSWlCLEtBQUtqQixDQUFUO0FBQ0FrQixlQUFXaEIsT0FBT2lCLE1BQVAsRUFBWDtBQUNBO0FBQ0QsR0FORDs7QUFRQWpCLFNBQU9pQixNQUFQLEdBQWdCLFlBQVc7QUFDekIsV0FBTyxFQUFDcEIsR0FBR0EsQ0FBSixFQUFPQyxHQUFHQSxDQUFWLEVBQWFGLEdBQUdBLENBQWhCLEVBQVA7QUFDRCxHQUZEO0FBR0Q7O0FBRUQsU0FBU29CLFVBQVQsQ0FBb0JFLE1BQXBCLEVBQTRCO0FBQzFCO0FBQ0E7QUFDQTtBQUNEOztBQUdEbEIsT0FBT21CLE1BQVAsR0FBZ0IxQixJQUFoQiIsImZpbGUiOiJkZXNrdG9wLmpzIiwic291cmNlc0NvbnRlbnQiOlsiZnVuY3Rpb24gbWFpbigpIHtcbiAgbGV0IHIgPSBSYWRhcigpO1xuICBsZXQgeiA9IC0xO1xuICBsZXQgeDtcbiAgbGV0IHk7XG5cbiAgci5zdGFydCgpO1xuXG4gIHdpbmRvdy5zZXRUaW1lb3V0KCgpID0+IHtyLnN0YXJ0TG9vcCgoKSA9PiB7XG4gICAgaWYgKCFOdW1iZXIuaXNOYU4oci5nZXRDb29yZHMoKS55KSkge1xuICAgICAgeiA9IDEgLSByLmdldENvb3JkcygpLnk7XG4gICAgfVxuICB9KX0sIDUwMCk7IC8vIGFic29sdXRlIHRyYXNoLCBwbGVhc2UgdXNlIHByb21pc2VzIG5leHQgdGltZVxuICBsZXQgcGVlciA9IG5ldyBQZWVyKCdjYWxsZXInLCB7c2VjdXJlOiB0cnVlLCBob3N0OiAnbG9jYWxob3N0JywgcG9ydDogOTAwMCwgcGF0aDogJy8nfSk7XG4gIC8vIGxldCBwZWVyID0gbmV3IFBlZXIoJ2NhbGxlcicsIHtzZWN1cmU6IHRydWUsIGtleTogJ3l4Z3lsNWV2ZG5kbjI5J30pOyAvLyB0aGVpciBzZXJ2ZXIgZG9lc24ndCBzdXBwb3J0IHNzbFxuICBsZXQgY29ubmVjdGlvbiA9IHBlZXIuY29ubmVjdCgnY2FsbGVlJyk7XG4gIGNvbm5lY3Rpb24ub24oJ29wZW4nLCAoKSA9PiB7XG4gICAgLy8gIGNvbm5lY3Rpb24uc2VuZCgnZG9ncyBtYW4nKTtcbiAgfSk7XG4gIGNvbm5lY3Rpb24ub24oJ2RhdGEnLCAoZGF0YSkgPT4ge1xuXG4gICAgeCA9IGRhdGEueDtcbiAgICB5ID0gZGF0YS55O1xuICAgIGh0bWxDb29yZHMod2luZG93LmdldFhZWigpKTtcbiAgICAvLyBjb25zb2xlLmxvZyhKU09OLnN0cmluZ2lmeSh3aW5kb3cuZ2V0WFlaKCkpKTtcbiAgfSk7XG5cbiAgd2luZG93LmdldFhZWiA9IGZ1bmN0aW9uKCkge1xuICAgIHJldHVybiB7eDogeCwgeTogeSwgejogen07XG4gIH1cbn1cblxuZnVuY3Rpb24gaHRtbENvb3Jkcyhjb29yZHMpIHtcbiAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3gnKS5pbm5lckhUTUwgPSBjb29yZHMueDtcbiAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3knKS5pbm5lckhUTUwgPSBjb29yZHMueTtcbiAgLy8gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3onKS5pbm5lckhUTUwgPSBjb29yZHMuejtcbn1cblxuXG53aW5kb3cub25sb2FkID0gbWFpbjtcbiJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==
